{"version":3,"sources":["../src/ui.js"],"names":["UNIT_PERCENT","UNIT_PX","UNIT_DEG","UNIT_RAD","UNIT_TURN","FILTERS","url","blur","val","unit","brightness","contrast","grayscale","invert","opacity","saturate","sepia","none","BUTTON_ZOOM_IN","BUTTON_ZOOM_OUT","BUTTON_RESET","BUTTON_SET_LOCATION","INPUT_PALETTE_SEED","INPUT_PALETTE_MODE","INPUT_PALETTE_SIZE","_renderScene","r","viewData","render","scale","x","y","_renderControls","paletteSeed","savedLocations","map","l","i","name","log","UI","canvas","controls","_canvas","Node","document","getElementById","_controls","_r","Renderer","coloringMethod","_initViewData","_scale","_dx","_dy","canvasWidth","width","canvasHeight","height","_viewHistory","_viewData","savedData","window","localStorage","getItem","savedJSON","JSON","parse","Array","updateInterface","ui","resizeCanvas","Object","assign","concat","updateViewportSize","requestAnimationFrame","addEventListener","e","preventDefault","realPositionToComplexPosition","layerX","layerY","zoomIn","innerHTML","zoomOut","retrievePalette","value","fetch","slice","paletteMode","paletteSize","response","json","palette","colors","c","rgb","msg","push","Date","saveData","length","setItem","stringify","getElementsByClassName","each","index","target","getAttribute","loc","console","module","exports"],"mappings":"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","sourcesContent":["import Renderer from './renderer';\n\n\nconst UNIT_PERCENT = '%';\nconst UNIT_PX = 'px';\nconst UNIT_DEG = 'deg';\nconst UNIT_RAD = 'rad';\nconst UNIT_TURN = 'turn';\n\nconst FILTERS = {\n  url: '',\n  blur: {\n    val: 0,\n    unit: UNIT_PX\n  },\n  brightness: {\n    val: 100,\n    unit: UNIT_PERCENT\n  },\n  contrast: {\n    val: 100,\n    unit: UNIT_PERCENT\n  },\n  //'drop-shadow': {} // TODO: ugh\n  grayscale: {\n    val: 0,\n    unit: UNIT_PERCENT\n  },\n  'hue-rotate': {\n    val: 0,\n    unit: UNIT_DEG\n  },\n  invert: {\n    val: 0,\n    unit: UNIT_PERCENT\n  },\n  opacity: {\n    val: 100,\n    unit: UNIT_PERCENT\n  },\n  saturate: {\n    val: 100,\n    unit: UNIT_PERCENT\n  },\n  sepia: {\n    val: 0,\n    unit: UNIT_PERCENT\n  },\n  none: 'none'\n};\n\nconst BUTTON_ZOOM_IN = 'button--zoom-in';\nconst BUTTON_ZOOM_OUT = 'button--zoom-out';\nconst BUTTON_RESET = 'button--reset';\nconst BUTTON_SET_LOCATION = 'button--set-location';\nconst INPUT_PALETTE_SEED = 'input--palette-seed';\nconst INPUT_PALETTE_MODE = 'input--palette-mode';\nconst INPUT_PALETTE_SIZE = 'input--palette-size';\n\n\nfunction _renderScene(r, viewData) {\n  r.render(viewData.scale, viewData.x, viewData.y);\n}\n\nfunction _renderControls(viewData) {\n  return `\n        <div>\n            <a id=\"get-png\" href=\"#\" target=\"_blank\">GET PNG</a>\n        </div>\n        <div>\n            <button id=\"${BUTTON_ZOOM_IN}\">+</button>\n            <button id=\"${BUTTON_ZOOM_OUT}\">-</button>\n            <button id=\"${BUTTON_RESET}\">Reset</button>\n        </div>\n        <div>\n            <button class=\"button--save\">Save</button>\n        </div>\n        <hr>\n        <input type=\"color\" id=\"${INPUT_PALETTE_SEED}\" value=${viewData.paletteSeed}>\n        <select id=\"${INPUT_PALETTE_MODE}\">\n          <option>analogic</option>\n          <option>monochrome</option>\n          <option>monochrome-light</option>\n          <option>monochrome-dark</option>\n          <option>complement</option>\n          <option>analogic-complement</option>\n          <option>triad</option>\n          <option>quad</option>\n        </select>\n        <br>\n        <input id=\"${INPUT_PALETTE_SIZE}\" type=\"number\" value=\"5\">\n\n        <hr>\n\n        <div id=\"location\">\n            <div>\n                <label for=\"scale\">Scale</label>\n                <input id=\"scale\" type=\"text\" value=\"${viewData.scale}\"  />\n            </div>\n            <div>\n                <label for=\"x-location\">X</label>\n                <input id=\"x-location\" type=\"text\" value=\"${viewData.x}\" />\n            </div>\n            <div>\n                <label for=\"y-location\">Y</label>\n                <input id=\"y-location\" type=\"text\" value=\"${viewData.y}\" />\n            </div>\n            <button id=\"${BUTTON_SET_LOCATION}\">go</button>\n        </div>\n        <div id=\"saved-list\">${viewData.savedLocations.map((l, i)=>{ return  `\n                <div>\n                    <a href=\"#\" class=\"saved-location\" data-location-index=\"${i}\">${l.name}}\n                </div>\n            `;})}</div>\n        <div id=\"log\">\n          ${viewData.log.map((l, i)=>{ return  `<p>${i}: ${l}</p>`;})}\n        </div>\n    `;\n}\n\nclass UI {\n  constructor(canvas, controls) {\n    this._canvas = canvas instanceof Node ? canvas : document.getElementById(canvas);\n    this._controls = controls instanceof Node ? controls : document.getElementById(controls);\n\n    this._r = new Renderer(this._canvas, {\n      //coloringMethod: 'default',\n      coloringMethod: 'continuous-coloring',\n      //loopPalette: true\n    });\n\n    this._initViewData = {\n      scale: this._r._scale,\n      x: this._r._dx, //horizontal offset, used for centering the set\n      y: this._r._dy,\n      canvasWidth: this._canvas.width,\n      canvasHeight: this._canvas.height,\n      savedLocations: [],\n      paletteSeed:'#000000',\n      log: []\n    };\n\n    this._viewHistory = [this._initViewData];\n    this._viewData = {...this._initViewData};\n\n    var savedData = window.localStorage.getItem('locations');\n    if (savedData) {\n      var savedJSON = JSON.parse(savedData);\n      if (savedJSON instanceof Array) {\n        this._viewData.savedLocations = savedJSON;\n      }\n    }\n\n    this.updateInterface();\n\n    let ui = this;\n    var resizeCanvas = () => {\n      if (ui._viewHistory[0].canvasWidth !== ui._canvas.width || ui._viewHistory[0].canvasHeight !== ui._canvas.height) {\n        ui.log('viewport size changed');\n        ui._viewHistory = [Object.assign({}, ui._viewData)].concat(ui._viewHistory);\n        ui._r.updateViewportSize();\n        Object.assign(ui._viewData, {\n          canvasWidth: this._canvas.width,\n          canvasHeight: this._canvas.height\n        });\n        ui.render();\n      }\n    };\n    window.requestAnimationFrame(resizeCanvas);\n\n    this._canvas.addEventListener('click', function (e) {\n      e.preventDefault();\n      let {\n        r,\n        i\n      } = ui._r.realPositionToComplexPosition(e.layerX, e.layerY);\n      ui._viewData.x = r;\n      ui._viewData.y = i;\n      ui.zoomIn();\n    });\n  }\n\n  updateInterface(){\n    this._controls.innerHTML = _renderControls(this._viewData);\n    document.getElementById(BUTTON_ZOOM_IN).addEventListener('click', (...args)=>this.zoomIn(...args));\n    document.getElementById(BUTTON_ZOOM_OUT).addEventListener('click', (...args)=>this.zoomOut(...args));\n    document.getElementById(INPUT_PALETTE_SEED).addEventListener('change',(...args)=>{\n      this._viewData.paletteSeed = this.paletteSeed;\n      this.retrievePalette(...args);\n    });\n    document.getElementById(INPUT_PALETTE_SIZE).addEventListener('change',(...args)=>this.retrievePalette(...args));\n    document.getElementById(INPUT_PALETTE_MODE).addEventListener('change',(...args)=>this.retrievePalette(...args));\n  }\n\n  get paletteSeed (){\n    return document.getElementById(INPUT_PALETTE_SEED).value;\n  }\n\n  get paletteSize (){\n    return document.getElementById(INPUT_PALETTE_SIZE).value;\n  }\n\n  get paletteMode(){\n    return document.getElementById(INPUT_PALETTE_MODE).value;\n  }\n\n  async retrievePalette(){\n    let response = await fetch(`//www.thecolorapi.com/scheme?hex=${this.paletteSeed.slice(1)}&mode=${this.paletteMode}&count=${this.paletteSize}`);\n    let json = await response.json();\n    this._r.palette = json.colors.map(c=>c.rgb);\n\n    _renderScene(this._r, this._viewData);\n  }\n\n  zoomIn() {\n    this._viewData.scale *= 2;\n    this.render();\n  }\n\n  zoomOut() {\n    this._viewData.scale /= 2;\n    this.render();\n  }\n  render() {\n    //_renderControls(this, this._viewData);\n    //bring up something to stop extra rendering\n    _renderScene(this._r, this._viewData);\n    this.updateInterface();\n\n  }\n\n  //log to the UI's console\n  log(msg) {\n    this._viewData.log.push(`${+new Date()} ${msg}.`);\n  }\n\n  reset() {\n    Object.assign(this._viewData, {\n      scale: this._initViewData.scale,\n      x: this._initViewData.x,\n      y: this._initViewData.y\n    });\n    this.render();\n  }\n\n  saveLocation() {\n    var saveData = {};\n    saveData.name = 'location ' + (this._viewData.savedLocations.length + 1);\n    saveData.x = this._viewData.x;\n    saveData.y = this._viewData.y;\n    saveData.scale = this._viewData.scale;\n    this._viewData.savedLocations.push(saveData);\n    window.localStorage.setItem('locations', JSON.stringify(this._viewData.savedLocations));\n    this._controls.innerHTML = _renderControls(this, this._viewData);\n  }\n\n  load(l) {\n    Object.assign(this._viewData, l);\n    this.render();\n  }\n  bindControls() {\n    this._controls.getElementsByClassName('saved-location').each(function (i) {\n      i.addEventListener('click', e => {\n        e.preventDefault();\n        var index = e.target.getAttribute('data-location-index');\n        var loc = this._viewData.savedLocations[index];\n        console.log(loc);\n        //load(loc);\n      });\n    });\n  }\n}\n\nmodule.exports = UI;\n\n//TODO: update canvas compositor to a proper ES6 module, and use it for more interactivity\n"],"file":"ui.js"}