{"version":3,"file":"ui.js","names":["UNIT_PERCENT","UNIT_PX","UNIT_DEG","UNIT_RAD","UNIT_TURN","FILTERS","url","blur","val","unit","brightness","contrast","grayscale","invert","opacity","saturate","sepia","none","BUTTON_ZOOM_IN","BUTTON_ZOOM_OUT","BUTTON_RESET","BUTTON_SET_LOCATION","INPUT_PALETTE_SEED","INPUT_PALETTE_MODE","INPUT_PALETTE_SIZE","INPUT_REAL_COORDINATE","INPUT_IMAGINARY_COORDINATE","INPUT_SCALE","_renderScene","r","viewData","render","scale","x","y","_renderControls","paletteSeed","savedLocations","map","l","i","name","log","UI","canvas","controls","urlParams","_canvas","Element","document","getElementById","_controls","_urlParams","Proxy","URLSearchParams","window","location","search","get","params","prop","_r","Renderer","coloringMethod","_initViewData","_scale","_dx","_dy","canvasWidth","width","canvasHeight","height","_viewHistory","_viewData","savedData","localStorage","getItem","savedJSON","JSON","parse","Array","addEventListener","e","handleClick","updateInterface","requestAnimationFrame","resizeCanvas","preventDefault","realPositionToComplexPosition","layerX","layerY","zoomIn","Object","assign","concat","updateViewportSize","innerHTML","_goButton","_realInput","_scaleInput","_imaginaryInput","_paletteSizeInput","_paletteModeInput","_paletteColorPicker","_zoomInButton","_zoomOutButton","zoomOut","retrievePalette","parseFloat","value","fetch","slice","paletteMode","paletteSize","response","json","palette","colors","c","rgb","msg","push","Date","saveData","length","setItem","stringify","getElementsByClassName","each","index","target","getAttribute","loc","console","module","exports"],"sources":["../src/ui.js"],"sourcesContent":["import Renderer from './renderer';\n\n\nconst UNIT_PERCENT = '%';\nconst UNIT_PX = 'px';\nconst UNIT_DEG = 'deg';\nconst UNIT_RAD = 'rad';\nconst UNIT_TURN = 'turn';\n\nconst FILTERS = {\n  url: '',\n  blur: {\n    val: 0,\n    unit: UNIT_PX\n  },\n  brightness: {\n    val: 100,\n    unit: UNIT_PERCENT\n  },\n  contrast: {\n    val: 100,\n    unit: UNIT_PERCENT\n  },\n  //'drop-shadow': {} // TODO: ugh\n  grayscale: {\n    val: 0,\n    unit: UNIT_PERCENT\n  },\n  'hue-rotate': {\n    val: 0,\n    unit: UNIT_DEG\n  },\n  invert: {\n    val: 0,\n    unit: UNIT_PERCENT\n  },\n  opacity: {\n    val: 100,\n    unit: UNIT_PERCENT\n  },\n  saturate: {\n    val: 100,\n    unit: UNIT_PERCENT\n  },\n  sepia: {\n    val: 0,\n    unit: UNIT_PERCENT\n  },\n  none: 'none'\n};\n\nconst BUTTON_ZOOM_IN = 'button--zoom-in';\nconst BUTTON_ZOOM_OUT = 'button--zoom-out';\nconst BUTTON_RESET = 'button--reset';\nconst BUTTON_SET_LOCATION = 'button--set-location';\nconst INPUT_PALETTE_SEED = 'input--palette-seed';\nconst INPUT_PALETTE_MODE = 'input--palette-mode';\nconst INPUT_PALETTE_SIZE = 'input--palette-size';\nconst INPUT_REAL_COORDINATE = 'x-location';\nconst INPUT_IMAGINARY_COORDINATE = 'y-location';\nconst INPUT_SCALE = 'scale';\n\n\nfunction _renderScene(r, viewData) {\n  r.render(viewData.scale, viewData.x, viewData.y);\n}\n\nfunction _renderControls(viewData) {\n  return `\n        <div>\n            <a id=\"get-png\" href=\"#\" target=\"_blank\">GET PNG</a>\n        </div>\n        <div>\n            <button id=\"${BUTTON_ZOOM_IN}\">+</button>\n            <button id=\"${BUTTON_ZOOM_OUT}\">-</button>\n            <button id=\"${BUTTON_RESET}\">Reset</button>\n        </div>\n        <div>\n            <button class=\"button--save\">Save</button>\n        </div>\n        <hr>\n        <input type=\"color\" id=\"${INPUT_PALETTE_SEED}\" value=${viewData.paletteSeed}>\n        <select id=\"${INPUT_PALETTE_MODE}\">\n          <option>analogic</option>\n          <option>monochrome</option>\n          <option>monochrome-light</option>\n          <option>monochrome-dark</option>\n          <option>complement</option>\n          <option>analogic-complement</option>\n          <option>triad</option>\n          <option>quad</option>\n        </select>\n        <br>\n        <input id=\"${INPUT_PALETTE_SIZE}\" type=\"number\" value=\"5\">\n\n        <hr>\n\n        <div id=\"location\">\n            <div>\n                <label for=\"${INPUT_SCALE}\">Scale</label>\n                <input id=\"${INPUT_SCALE}\" type=\"text\" value=\"${viewData.scale}\"  />\n            </div>\n            <div>\n                <label for=\"${INPUT_REAL_COORDINATE}\">X</label>\n                <input id=\"${INPUT_REAL_COORDINATE}\" type=\"text\" value=\"${viewData.x}\" />\n            </div>\n            <div>\n                <label for=\"${INPUT_IMAGINARY_COORDINATE}\">Y</label>\n                <input id=\"${INPUT_IMAGINARY_COORDINATE}\" type=\"text\" value=\"${viewData.y}\" />\n            </div>\n            <button id=\"${BUTTON_SET_LOCATION}\">go</button>\n        </div>\n        <div id=\"saved-list\">${viewData.savedLocations.map((l, i)=>{ return  `\n                <div>\n                    <a href=\"#\" class=\"saved-location\" data-location-index=\"${i}\">${l.name}}\n                </div>\n            `;})}</div>\n        <div id=\"log\">\n          ${viewData.log.map((l, i)=>{ return  `<p>${i}: ${l}</p>`;})}\n        </div>\n    `;\n}\n\nclass UI {\n\n  /**\n   *\n   * @param {HTMLCanvasElement|String} canvas the HTMLCanvasElement element for rendering fractal images, or its `id`\n   * @param {HTMLElement|String} controls the HTMLElement that houses the controls or its `id`\n   * @param {URLSearchParams|String} urlParams the ULRSearchParams or the query string returned by `window.location.search`;\n   */\n  constructor(canvas, controls, urlParams) {\n    this._canvas = canvas instanceof Element ? canvas : document.getElementById(canvas);\n    this._controls = controls instanceof Element ? controls : document.getElementById(controls);\n    this._urlParams = new Proxy(urlParams instanceof URLSearchParams ? urlParams : new URLSearchParams(window.location.search), {\n      get: (params, prop) => params.get(prop)\n    });\n\n    this._r = new Renderer(this._canvas, {\n      //coloringMethod: 'default',\n      coloringMethod: 'continuous-coloring',\n      //loopPalette: true\n    });\n\n    this._initViewData = {\n      scale: this._r._scale,\n      x: this._r._dx, //horizontal offset, used for centering the set\n      y: this._r._dy,\n      canvasWidth: this._canvas.width,\n      canvasHeight: this._canvas.height,\n      savedLocations: [],\n      paletteSeed:'#000000',\n      log: []\n    };\n\n    this._viewHistory = [this._initViewData];\n    this._viewData = {...this._initViewData};\n\n    var savedData = window.localStorage.getItem('locations');\n    if (savedData) {\n      var savedJSON = JSON.parse(savedData);\n      if (savedJSON instanceof Array) {\n        this._viewData.savedLocations = savedJSON;\n      }\n    }\n\n    this._canvas.addEventListener('click', (e)=>this.handleClick(e));\n    this.updateInterface();\n    window.requestAnimationFrame((e)=>this.resizeCanvas(e));\n  }\n\n\n  handleClick(e){\n    e.preventDefault();\n    let {\n      r,\n      i\n    } = this._r.realPositionToComplexPosition(e.layerX, e.layerY);\n    this._viewData.x = r;\n    this._viewData.y = i;\n    this.zoomIn();\n  }\n\n  resizeCanvas(){\n    if (this._viewHistory[0].canvasWidth !== this._canvas.width || this._viewHistory[0].canvasHeight !== this._canvas.height) {\n      this.log('viewport size changed');\n      this._viewHistory = [Object.assign({}, this._viewData)].concat(this._viewHistory);\n      this._r.updateViewportSize();\n      Object.assign(this._viewData, {\n        canvasWidth: this._canvas.width,\n        canvasHeight: this._canvas.height\n      });\n      this.render();\n    }\n  }\n\n  updateInterface(){\n    this._controls.innerHTML = _renderControls(this._viewData);\n\n    this._goButton = document.getElementById(BUTTON_SET_LOCATION);\n    this._realInput = document.getElementById(INPUT_REAL_COORDINATE);\n    this._scaleInput = document.getElementById(INPUT_SCALE);\n    this._imaginaryInput = document.getElementById(INPUT_IMAGINARY_COORDINATE);\n    this._paletteSizeInput =document.getElementById(INPUT_PALETTE_SIZE);\n    this._paletteModeInput =document.getElementById(INPUT_PALETTE_MODE);\n    this._paletteColorPicker = document.getElementById(INPUT_PALETTE_SEED);\n    this._zoomInButton = document.getElementById(BUTTON_ZOOM_IN);\n    this._zoomOutButton = document.getElementById(BUTTON_ZOOM_OUT);\n\n    this._zoomInButton.addEventListener('click', (...args)=>this.zoomIn(...args));\n    this._zoomOutButton.addEventListener('click', (...args)=>this.zoomOut(...args));\n\n    this._paletteModeInput.addEventListener('change',(...args)=>this.retrievePalette(...args));\n    this._paletteSizeInput.addEventListener('change',(...args)=>this.retrievePalette(...args));\n    this._paletteColorPicker.addEventListener('change',(...args)=>{\n      this._viewData.paletteSeed = this.paletteSeed;\n      this.retrievePalette(...args);\n    });\n\n\n    this._goButton.addEventListener('click', ()=>{\n      this._viewData.x = parseFloat(this._realInput.value);\n      this._viewData.y = parseFloat(this._imaginaryInput.value);\n      this._viewData.scale = parseFloat(this._scaleInput.value);\n      this.render();\n    });\n\n  }\n\n  get paletteSeed (){\n    return this._paletteColorPicker.value;\n  }\n\n  get paletteSize (){\n    return this._paletteSizeInput.value;\n  }\n\n  get paletteMode(){\n    return this._paletteModeInput.value;\n  }\n\n  async retrievePalette(){\n    let response = await fetch(`//www.thecolorapi.com/scheme?hex=${this.paletteSeed.slice(1)}&mode=${this.paletteMode}&count=${this.paletteSize}`);\n    let json = await response.json();\n    this._r.palette = json.colors.map(c=>c.rgb);\n\n    //_renderScene(this._r, this._viewData);\n  }\n\n  zoomIn() {\n    this._viewData.scale *= 2;\n    this.render();\n  }\n\n  zoomOut() {\n    this._viewData.scale /= 2;\n    this.render();\n  }\n  render() {\n    //_renderControls(this, this._viewData);\n    //bring up something to stop extra rendering\n    _renderScene(this._r, this._viewData);\n    this.updateInterface();\n\n  }\n\n  //log to the UI's console\n  log(msg) {\n    this._viewData.log.push(`${+new Date()} ${msg}.`);\n  }\n\n  reset() {\n    Object.assign(this._viewData, {\n      scale: this._initViewData.scale,\n      x: this._initViewData.x,\n      y: this._initViewData.y\n    });\n    this.render();\n  }\n\n  saveLocation() {\n    var saveData = {};\n    saveData.name = 'location ' + (this._viewData.savedLocations.length + 1);\n    saveData.x = this._viewData.x;\n    saveData.y = this._viewData.y;\n    saveData.scale = this._viewData.scale;\n    this._viewData.savedLocations.push(saveData);\n    window.localStorage.setItem('locations', JSON.stringify(this._viewData.savedLocations));\n    this._controls.innerHTML = _renderControls(this, this._viewData);\n  }\n\n  load(l) {\n    Object.assign(this._viewData, l);\n    this.render();\n  }\n  bindControls() {\n    this._controls.getElementsByClassName('saved-location').each(function (i) {\n      i.addEventListener('click', e => {\n        e.preventDefault();\n        var index = e.target.getAttribute('data-location-index');\n        var loc = this._viewData.savedLocations[index];\n        console.log(loc);\n        //load(loc);\n      });\n    });\n  }\n}\n\nmodule.exports = UI;\n\n//TODO: update canvas compositor to a proper ES6 module, and use it for more interactivity\n"],"mappings":"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"}